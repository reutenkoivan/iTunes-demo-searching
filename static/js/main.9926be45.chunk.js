(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(t,e,a){t.exports=a(260)},187:function(t,e,a){},260:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(20),i=a.n(o),c=a(33),s=a(17),l=a(108),u=a(51),p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_TO_FAVORITE_SUCCESS":return"undefined"!=typeof e.data&&t.every(function(t){return t.trackId-e.data.trackId})?[].concat(Object(u.a)(t),[e.data]):t.filter(function(t){return t.trackId!==e.data.trackId});default:return t}},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_SONGS_SUCCESS":return Object(u.a)(e.data);case"SWITCH_FAVORITES_STATE":return t.some(function(t){return t.trackId===e.id})?Object(u.a)(t.map(function(t){return t.trackId===e.id?(t.isFavorite=!t.isFavorite,t):t})):t;case"FETCH_SONGS_ERROR":return[e.error];default:return t}},d={trackLink:"",isPlaying:!1,trackId:0,artistName:"",trackName:"",playlist:[],index:0},f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_SONG_SUCCESS":var a=Object.assign({},t);return a.trackLink=e.song.previewUrl,a.trackId=e.song.trackId,a.isPlaying=e.song.previewUrl!==t.trackLink||!t.isPlaying,a.artistName=e.song.artistName,a.trackName=e.song.trackName,a.playlist=e.playlist,a.index=e.playlist.findIndex(function(t){return t.trackId===e.song.trackId}),a.next=a.index===e.playlist.length-1?0:a.index+1,a.previous=0===a.index?e.playlist.length-1:a.index-1,a;default:return t}},h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_ROOT_PATH":return"".concat(e.path,"/");default:return t}},g=Object(c.c)({playerInfo:f,songs:m,favorites:p,rootPath:h}),v=a(23),y={main:Object(v.createMuiTheme)({palette:{primary:{main:"#3F5866",contrastText:"#F2F2F2"},secondary:{main:"#BDD3DE",contrastText:"#F2F2F2"},error:{main:"#FF9000",contrastText:"#F0F0DF"},background:{paper:"#f2f2f2",default:"#fff"},text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)",icon:"rgba(0, 0, 0, 0.12)"},divider:"rgba(0, 0, 0, 0.12)",action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.08)",hoverOpacity:.1,selected:"rgba(0, 0, 0, 0.14)",disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)"}},typography:{useNextVariants:!0}})},b=(a(187),a(24)),E=a(25),k=a(27),S=a(26),O=a(28),w=a(43),I=a(34),N=a(41),j=a.n(N),P=a(109),T=a.n(P),C=a(110),x=a.n(C),D=a(112),F=a.n(D),_=a(30),A=a.n(_),R=a(19),U=a.n(R),B=a(60),L=a.n(B),V=a(111),H=a.n(V),G=a(61),M=a.n(G),W=a(40),J=a.n(W),X=function(t){function e(){var t,a;Object(b.a)(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(k.a)(this,(t=Object(S.a)(e)).call.apply(t,[this].concat(r)))).state={favoriteButtonColor:"primary"},a.switchSoundState=function(){var t=a.props.favorite?a.props.favorites:a.props.searching;a.props.addSongToPlayer(a.props.song,t)},a.switchFavoriteState=function(){a.props.switchFavoritesState(a.props.song),a.setState("primary"===a.state.favoriteButtonColor?{favoriteButtonColor:"error"}:{favoriteButtonColor:"primary"})},a}return Object(O.a)(e,t),Object(E.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.props.favorites.some(function(e){return e.trackId===t.props.song.trackId})&&this.setState({favoriteButtonColor:"error"})}},{key:"componentDidUpdate",value:function(t,e){this.props.favorites.length||"error"!==e.favoriteButtonColor||this.setState({favoriteButtonColor:"primary"})}},{key:"render",value:function(){var t=this,e=this.props,a=e.classes,n=e.song,o=e.playerInfo;return r.a.createElement(J.a,{item:!0,xs:12},r.a.createElement(T.a,{className:a.card},r.a.createElement("div",{className:a.details},r.a.createElement(x.a,{className:a.content},r.a.createElement(U.a,{component:"h5",variant:"h5",title:"name of track is ".concat(n.trackName)},n.trackName),r.a.createElement(U.a,{variant:"subtitle1",color:"textSecondary",title:"artist name is ".concat(n.artistName)},n.artistName)),r.a.createElement("div",{className:a.controls},r.a.createElement(A.a,{title:o.isPlaying&&o.trackLink===n.previewUrl?"Pause":"Play",onClick:this.switchSoundState,"aria-label":o.isPlaying&&o.trackLink===n.previewUrl?"Pause":"Play"},o.isPlaying&&o.trackLink===n.previewUrl?r.a.createElement(H.a,{color:"primary"}):r.a.createElement(L.a,{color:"primary"})),r.a.createElement(A.a,{onClick:this.switchFavoriteState,"aria-label":"Add-to-favorite",title:this.props.favorites.some(function(e){return e.trackId===t.props.song.trackId})?"Favorite":"Not favorite"},r.a.createElement(M.a,{color:this.state.favoriteButtonColor})),"error"===this.state.favoriteButtonColor?r.a.createElement(j.a,{href:n.artistViewUrl,target:"_blank"},r.a.createElement(U.a,{className:a.price,variant:"subtitle1",color:"textSecondary",title:"Look on iTunes"},"Look on iTunes")):r.a.createElement(U.a,{className:a.price,variant:"subtitle1",color:"textSecondary"},n.trackPrice,"$"))),r.a.createElement(F.a,{title:n.collectionName,className:a.cover,image:n.artworkUrl})),r.a.createElement("br",null))}}]),e}(n.Component),K=Object(v.withStyles)(function(t){return{card:{display:"flex"},details:{display:"flex",flexDirection:"column",width:"100%"},content:{flex:"1 0 auto"},cover:{width:150},controls:{display:"flex",alignItems:"center",paddingLeft:t.spacing.unit,paddingBottom:t.spacing.unit},price:{paddingLeft:t.spacing.unit,paddingRight:t.spacing.unit}}})(X),Y=function(t){return{id:t,type:"SWITCH_FAVORITES_STATE"}},$=function(t,e){return{song:t,playlist:e,type:"ADD_SONG_SUCCESS"}},q=function(t){return{data:t,type:"ADD_TO_FAVORITE_SUCCESS"}},z=function(t){return function(e){var a=localStorage.getItem("iTunesApp");if("string"!==typeof a)localStorage.setItem("iTunesApp",t.trackId),e(Y(t.trackId)),e(q(t));else if(a.split(" ").every(function(e){return e-t.trackId}))localStorage.setItem("iTunesApp",(a+" "+t.trackId).trim()),e(Y(t.trackId)),e(q(t));else{var n=a.split(" ").filter(function(e){return e-t.trackId});localStorage.setItem("iTunesApp",n.join(" ").trim()),e(Y(t.trackId)),e(q(t))}}},Q=Object(s.b)(function(t){return{favorites:t.favorites,playerInfo:t.playerInfo,searching:t.songs}},function(t){return{switchFavoritesState:function(e){return t(z(e))},addSongToPlayer:function(e,a){return t($(e,a))}}})(K),Z=function(t){return t.songs.map(function(e){return r.a.createElement(Q,{key:e.trackId,favorite:t.isfavorite,song:e})})},tt=function(t){return t.songs.length?r.a.createElement(J.a,{item:!0,xs:12},r.a.createElement(Z,{favorite:!1,songs:t.songs})):r.a.createElement(U.a,{omponent:"h2",variant:"h4",color:"secondary",gutterBottom:!0,align:"center"},"For searching write in input field")},et=Object(s.b)(function(t){return{songs:t.songs}})(tt),at=function(t){return t.favorites.length?r.a.createElement(J.a,{item:!0,xs:12},r.a.createElement(Z,{isfavorite:!0,songs:t.favorites})):r.a.createElement(U.a,{omponent:"h2",variant:"h4",color:"secondary",gutterBottom:!0,align:"center"},"You don't have favorites yet")},nt=Object(s.b)(function(t){return{songs:t.songs.filter(function(t){return t.isFavorite}),favorites:t.favorites}})(at),rt=a(42),ot=a(62),it=a.n(ot),ct=a(63),st=a.n(ct),lt=a(113),ut=a.n(lt),pt=a(114),mt=a.n(pt),dt=a(115),ft=a.n(dt),ht=function(t){function e(){var t,a;Object(b.a)(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(k.a)(this,(t=Object(S.a)(e)).call.apply(t,[this].concat(r)))).switchSoundState=function(){var t=a.props.history.location.pathname.split(/\//g).reverse()[0],e=a.props.track,n=e.favorites,r=e.songs,o=a.props,i=o.favoritesSongs,c=o.searchingSongs;o.playerInfo.artistName?n.length?a.props.addSongToPlayer(n[0],i):a.props.addSongToPlayer(r[0],c):"favorites"===t&&i[0]?a.props.addSongToPlayer(i[0],i):!t&&c[0]&&a.props.addSongToPlayer(c[0],c)},a.playNext=function(){var t=a.props.playerInfo,e=t.playlist,n=t.next;t.artistName&&1!==e.length&&a.props.addSongToPlayer(e[n],e)},a.playPrevious=function(){var t=a.props.playerInfo,e=t.playlist,n=t.previous;t.artistName&&1!==e.length&&a.props.addSongToPlayer(e[n],e)},a}return Object(O.a)(e,t),Object(E.a)(e,[{key:"componentDidMount",value:function(){var t=this.props.history.location.pathname.split("/").slice(0,2).join("/").trim();this.props.addRootPath(t.length-1?t:""),this.props.history.location.pathname.length===t.length&&t.length-1&&this.props.history.push("".concat(t,"/"))}},{key:"render",value:function(){var t=this.props,e=t.classes,a=t.playerInfo;return r.a.createElement(it.a,{color:"primary",className:e.appBar},r.a.createElement(st.a,{className:e.toolbar},r.a.createElement("div",{className:e.songInfo},r.a.createElement(U.a,{name:"trackName",className:e.title,variant:"h5",color:"inherit",noWrap:!0},a.trackName),r.a.createElement(U.a,{name:"artistName",className:e.title,variant:"h6",color:"secondary",noWrap:!0},a.artistName)),r.a.createElement("div",{className:e.controls},r.a.createElement(A.a,{onClick:this.playPrevious,color:"secondary","aria-label":"Previous"},r.a.createElement(ut.a,null)),r.a.createElement(A.a,{onClick:this.switchSoundState,"aria-label":a.isPlaying?"Pause":"Play"},a.isPlaying?r.a.createElement(mt.a,{color:"secondary"}):r.a.createElement(L.a,{color:"secondary"})),r.a.createElement(A.a,{onClick:this.playNext,color:"secondary","aria-label":"Next"},r.a.createElement(ft.a,null)))))}}]),e}(n.Component),gt=Object(v.withStyles)(function(t){return{appBar:{top:"auto",bottom:0},title:Object(rt.a)({display:"none"},t.breakpoints.up("sm"),{display:"block"}),songInfo:{position:"absolute"},toolbar:{display:"flex",alignItems:"center"},controls:{display:"flex",alignItems:"center",margin:"0 auto"}}})(ht),vt=Object(s.b)(function(t){return{track:{songs:t.songs.filter(function(e){return e.trackId===t.playerInfo.trackId}),favorites:t.favorites.filter(function(e){return e.trackId===t.playerInfo.trackId})},playerInfo:t.playerInfo,searchingSongs:t.songs,favoritesSongs:t.favorites,rootPath:t.rootPath}},function(t){return{addSongToPlayer:function(e,a){return t($(e,a))},addRootPath:function(e){return t(function(t){return{path:t,type:"ADD_ROOT_PATH"}}(e))}}})(gt),yt=a(123),bt=a.n(yt),Et=a(39),kt=a(122),St=a.n(kt),Ot=a(64),wt=a.n(Ot),It=a(116),Nt=a.n(It),jt=a(117),Pt=a.n(jt),Tt=a(119),Ct=a.n(Tt),xt=a(65),Dt=a.n(xt),Ft=a(66),_t=a.n(Ft),At=a(120),Rt=a.n(At),Ut=function(t){function e(){var t,a;Object(b.a)(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(k.a)(this,(t=Object(S.a)(e)).call.apply(t,[this].concat(r)))).toggleDrawer=function(t){return a.props.toggleDrawer(t)},a.clearStorage=function(){a.props.favorites.forEach(function(t){return a.props.switchFavoritesState(t)}),localStorage.removeItem("iTunesApp")},a}return Object(O.a)(e,t),Object(E.a)(e,[{key:"render",value:function(){var t=this.props,e=t.classes,a=t.rootPath;return r.a.createElement("div",null,r.a.createElement(Nt.a,{open:this.props.isOpen,onClose:this.toggleDrawer(!1),onOpen:this.toggleDrawer(!0)},r.a.createElement("div",{role:"button",onClick:this.toggleDrawer(!1),onKeyDown:this.toggleDrawer(!1)},r.a.createElement("div",{className:e.list},r.a.createElement(Pt.a,null,r.a.createElement(j.a,{component:w.b,to:a},r.a.createElement(Dt.a,{button:!0},r.a.createElement(wt.a,null),r.a.createElement(_t.a,{primary:"Search"}))),r.a.createElement(j.a,{component:w.b,to:a+"favorites"},r.a.createElement(Dt.a,{button:!0},r.a.createElement(M.a,null),r.a.createElement(_t.a,{primary:"Favorites"}))),r.a.createElement(Ct.a,null),r.a.createElement(j.a,{component:w.b,onClick:this.clearStorage,to:"/"},r.a.createElement(Dt.a,{button:!0},r.a.createElement(Rt.a,null),r.a.createElement(_t.a,{primary:"Clear favorites"}))))))))}}]),e}(r.a.Component),Bt=Object(v.withStyles)({list:{width:250}})(Ut),Lt=Object(s.b)(function(t){return{favorites:t.favorites,rootPath:t.rootPath}},function(t){return{switchFavoritesState:function(e){return t(z(e))}}})(Bt),Vt=a(121),Ht=function(t){function e(){var t,a;Object(b.a)(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(k.a)(this,(t=Object(S.a)(e)).call.apply(t,[this].concat(r)))).state={isOpen:!1},a.searchingValue=function(t){var e=t.target.value.trim().split(/\s+/).join("+");e&&a.props.getSongs(e)},a.toggleDrawer=function(t){return function(){a.setState({isOpen:t})}},a}return Object(O.a)(e,t),Object(E.a)(e,[{key:"render",value:function(){var t=this.props.classes,e=this.props.rootPath===this.props.history.location.pathname;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:t.root},r.a.createElement(it.a,{position:"static"},r.a.createElement(st.a,null,r.a.createElement(A.a,{onClick:this.toggleDrawer(!0),className:t.menuButton,color:"inherit","aria-label":"Open drawer"},r.a.createElement(St.a,null)),r.a.createElement(U.a,{className:t.title,variant:"h6",color:"inherit",noWrap:!0},e?"Searching page":"Favorite songs"),r.a.createElement("div",{className:t.grow}),e?r.a.createElement("div",{className:t.search},r.a.createElement("div",{className:t.searchIcon},r.a.createElement(wt.a,null)),r.a.createElement(Vt.DebounceInput,{element:bt.a,minLength:2,debounceTimeout:700,onChange:this.searchingValue,placeholder:"Song...",classes:{root:t.inputRoot,input:t.inputInput}})):""))),r.a.createElement(Lt,{isOpen:this.state.isOpen,toggleDrawer:this.toggleDrawer}))}}]),e}(n.Component),Gt=Object(v.withStyles)(function(t){return{root:{width:"100%"},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},title:Object(rt.a)({display:"none"},t.breakpoints.up("sm"),{display:"block"}),search:Object(rt.a)({position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:Object(Et.fade)(t.palette.common.white,.15),"&:hover":{backgroundColor:Object(Et.fade)(t.palette.common.white,.25)},marginLeft:0,width:"100%"},t.breakpoints.up("sm"),{marginLeft:t.spacing.unit,width:"auto"}),searchIcon:{width:9*t.spacing.unit,height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(rt.a)({paddingTop:t.spacing.unit,paddingRight:t.spacing.unit,paddingBottom:t.spacing.unit,paddingLeft:10*t.spacing.unit,transition:t.transitions.create("width"),width:"100%"},t.breakpoints.up("sm"),{width:120,"&:focus":{width:250}})}})(Ht),Mt=function(t,e){return t.map(function(t){return{artistName:t.artistName,trackName:t.trackName,previewUrl:t.previewUrl,artworkUrl:(a=t.artworkUrl100,a.slice(0,-13)+"300x300bb.jpg"),trackPrice:t.trackPrice,trackId:t.trackId,collectionName:t.collectionName,artistViewUrl:t.artistViewUrl,isFavorite:e};var a})},Wt=function(t,e){return function(a){return"undefined"===typeof e?fetch("https://itunes.apple.com/search?term=".concat(t,"&media=music&limit=10")).then(function(t){return t.json()}).then(function(t){return a(function(t){return{data:t,type:"FETCH_SONGS_SUCCESS"}}(Mt(t.results,!1)))}).catch(function(t){return a({error:t,type:"FETCH_SONGS_ERROR"})}):fetch("https://itunes.apple.com/lookup?id=".concat(e,"&entity=song")).then(function(t){return t.json()}).then(function(t){return a(q(Mt(t.results,!0)[0]))}).catch(function(t){return a({error:t,type:"FETCH_SONGS_ERROR"})})}},Jt=Object(s.b)(function(t){return{rootPath:t.rootPath}},function(t){return{getSongs:function(e){return t(Wt(e))}}})(Gt),Xt=function(t){function e(){var t,a;Object(b.a)(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(k.a)(this,(t=Object(S.a)(e)).call.apply(t,[this].concat(r)))).playSong=function(){return a.audio.play()},a.pause=function(){return a.audio.pause()},a}return Object(O.a)(e,t),Object(E.a)(e,[{key:"componentDidMount",value:function(){var t=this,e=localStorage.getItem("iTunesApp");"string"===typeof e&&e&&e.split(" ").forEach(function(e){return t.props.getSongs(null,e)})}},{key:"componentDidUpdate",value:function(t){var e=this,a=this.props.playerInfo,n=a.trackLink,r=a.isPlaying,o=a.playlist,i=a.next;n!==t.playerInfo.trackLink?(this.audio=new Audio(n),this.audio.onended=function(){e.props.addSongToPlayer(o[i],o)},this.audio.onloadeddata=function(){return e.audio.play()}):void 0!==this.audio&&(r?this.playSong():this.pause())}},{key:"getSnapshotBeforeUpdate",value:function(t){var e=this.props.playerInfo.trackLink;return t.playerInfo.trackLink&&e!==t.playerInfo.trackLink&&(this.audio.src=""),null}},{key:"render",value:function(){var t=this.props.rootPath;return r.a.createElement(w.a,null,r.a.createElement(I.a,{path:t,component:Jt}),r.a.createElement("br",null),r.a.createElement(I.a,{exact:!0,path:t,component:et}),r.a.createElement(I.a,{exact:!0,path:t+"favorites",component:nt}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(I.a,{path:t,component:vt}))}}]),e}(n.Component),Kt=Object(s.b)(function(t){return{playerInfo:t.playerInfo,rootPath:t.rootPath}},function(t){return{getSongs:function(e,a){return t(Wt(e,a))},addSongToPlayer:function(e,a){return t($(e,a))}}})(Xt),Yt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d,$t=Object(c.e)(g,Yt(Object(c.a)(l.a)));i.a.render(r.a.createElement(s.a,{store:$t},r.a.createElement(v.MuiThemeProvider,{theme:y.main},r.a.createElement(Kt,null))),document.getElementById("root"))}},[[124,1,2]]]);
//# sourceMappingURL=main.9926be45.chunk.js.map